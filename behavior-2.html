<! DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
    <link href="style.css" rel="stylesheet" />
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
    <script src="Highmaps-6/code/highcharts.js"></script>
    <script src='Highmaps-6/code/js/modules/map.js'></script>
    <script src="Highmaps-6/code/modules/data.js"></script>
    <script src="https://code.highcharts.com/mapdata/countries/us/us-all.js"></script>
    <script src='jquery-3.3.1.js'></script>
</head>

<body>
    <div id="factual">
        <img style="padding-left: 12px; padding-top: 8px; width: 25px;" src="Factual-color.png">
    </div>
    <div id="filters">
        <div style="position: absolute; left: 100px; top: 15px;">
            <img src="arbys.png" id="logo-small" class="small">
        </div>
        <div style="position: absolute; left: 160px; top: 5px;">
            <h2>Arby's</h2>
        </div>
        <div style="position: absolute; left: 280px; top: 10px; height: 70%; width: 2px; background-color: rgba(0,0,0,.05);"></div>
        <div style="position: absolute; left: 300px; top: 14px;">
            <table>
                <tr>
                    <td style="font-size:.8em; font-weight: 700; padding-bottom: 4px;">Region</td>
                </tr>
                <tr>
                    <td>Los Angeles</td>
                    <td style="padding-left: 10px;"><a href="behavior.html">x</a></td>
                </tr>
            </table>
        </div>

        <div style="position: absolute; right: 0; height: 70px; border: 2px solid RGBA(251, 141, 43, 1.00); box-sizing: border-box; padding: 27px 20px; cursor: pointer;">
            <b>BUY AUDIENCE</b>
        </div>
    </div>
    <div class="hero">
        <div id='map' style="width:100%; height: 800px;"></div>
        <div id='overlay'></div>
        <div id="overlay-content">
            <img src="arbys.png" id="logo">
            <div style="position: absolute; left: 30%; top: 34%;">
                <h1 style="font-size: 4em; text-transform: none; letter-spacing: 0px;">Arby's</h1>
                <p>Fast Food > American</p>
            </div>
            <div id="stats-1">
                <table>
                    <tr>
                        <td class="td1">5,796,862</td>
                        <td class="td1">#13</td>
                        <td class="td1">0.91%</td>
                    </tr>
                    <tr>
                        <td class="td2">Visitors Observed</td>
                        <td class="td2">Rank in Category</td>
                        <td class="td2">Category Visit Share</td>
                    </tr>
                </table>

            </div>
        </div>
    </div>
    <div id="behavior">
        <div class="content">
            <div style="height: 160px;"></div>
            <a href="footfall-2.html"><h1 class="tabs">Footfall</h1></a>
            <a href="user-2.html"><h1 class="tabs">User Journey</h1></a>
            <a href="demo-2.html"><h1 class="tabs">Demographics</h1></a>
            <a href="behavior-2.html"><h1 class="tabs active">Behavior</h1></a>
            <div style="height: 60px;"></div>
            <div class="stats">
                <table style="width: 100%;">
                    <tr>
                        <th>Most Visitors Go To...</th>
                        <th style="padding-left: 20px;">Likely to Go To...</th>
                        <th style="padding-left: 20px;">Top Profiles</th>
                        <th style="padding-left: 20px; border-right: none;">Profile Likely to Visit</th>
                    </tr>
                    <tr>
                        <td style="border-right: 1px rgba(0,0,0,0.1) solid;">
                            <table class="td-table">
                                <tr>
                                    <td>McDonald's</td>
                                    <td>72.6%</td>
                                </tr>
                                <tr>
                                    <td>Gas Stations</td>
                                    <td>90.8%</td>
                                </tr>
                            </table>
                        </td>
                        <td style="border-right: 1px rgba(0,0,0,0.1) solid; padding-left: 20px;">
                            <table class="td-table">
                                <tr>
                                    <td>Just Brakes</td>
                                    <td class="green">+52.4%</td>
                                </tr>
                                <tr>
                                    <td>Swimming Pool a...</td>
                                    <td class="green">+61.7%</td>
                                </tr>
                            </table>
                        </td>

                        <td style="border-right: 1px rgba(0,0,0,0.1) solid; padding-left: 20px;">

                            <table class="td-table">
                                <tr>
                                    <td>Value Conscious Sh...</td>
                                    <td>71.0%</td>

                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                            </table>

                        </td>
                        <td style=" padding-left: 20px;">
                            <table class="td-table">
                                <tr>
                                    <td>NFL Enthusiasts</td>
                                    <td class="green">+86.8%</td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                            </table>

                        </td>
                    </tr>
                </table>
            </div>
            <div style="height: 60px;"></div>
            <div style="width: 100%;">
                <div>
                    <div style="width: 45%; display: inline-block; vertical-align: top;">
                        <h2>Most Visitors Go To...</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent">72.6%</td>
                                    <td class="subtext">go to McDonald's.</td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="topCh" width="350" height="200"></canvas>
                    </div>
                    <div style="width: 5%; display:inline-block;"></div>
                    <div style="width: 45%; display: inline-block;">
                        <h2>&nbsp;</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent">90.8%</td>
                                    <td class="subtext">go to Gas Stations.
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="topCat" width="350" height="200"></canvas>
                    </div>
                </div>

                <div style="height: 60px;"></div>

                <div>
                    <div style="width: 45%; display: inline-block; vertical-align: top;">
                        <h2>Likely to Go To...</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent green">+52.4%</td>
                                    <td class="subtext">more likely to go to Just Brakes.</td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="ch" width="350" height="200"></canvas>
                    </div>
                    <div style="width: 5%; display:inline-block;"></div>
                    <div style="width: 45%; display: inline-block;">
                        <h2>&nbsp;</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent green">+61.7%</td>
                                    <td class="subtext">more likely to go to Swimming Pool and Maintenance stores.
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="cat" width="350" height="200"></canvas>
                    </div>
                </div>

                <div style="margin-top: 80px;">
                    <div style="width: 45%; display: inline-block; vertical-align: top;">
                        <h2>Top Profiles</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent ">71.0%</td>
                                    <td class="subtext">of visitors are Value Conscious Shoppers.
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="topProfiles" width="350" height="200"></canvas>
                    </div>
                    <div style="width: 5%; display:inline-block;"></div>
                    <div style="width: 45%; display: inline-block;">
                        <h2>Profiles Likely to Visit</h2>
                        <div>
                            <table>
                                <tr>
                                    <td class="percent green">+267%</td>
                                    <td class="subtext">more likely to visit if NFL Enthusiast.
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <br>
                        <canvas id="profiles" width="350" height="200"></canvas>
                    </div>
                </div>

            </div>


        </div>


        <script>
            $(window).on("load", function() {
                console.log(window.scrollY);
                $('html, body').animate({
                    scrollTop: $('#behavior').offset().top
                }, 'none');
                if (window.scrollY > 800) {
                    document.getElementById("filters").style.opacity = "1";
                } else {
                    document.getElementById("filters").style.opacity = "0";
                }
            });

            $(window).on("scroll", function() {
                console.log(window.scrollY);
                if (window.scrollY > 800) {
                    document.getElementById("filters").style.opacity = "1";
                } else {
                    document.getElementById("filters").style.opacity = "0";
                }
            });


            mapboxgl.accessToken = 'pk.eyJ1IjoibGF3cmVuY2UtZmFjdHVhbCIsImEiOiJjamQ2OWdseHQ0dHkxMndvMXh4cXF3c3g1In0.ycrRQ-DESrMwj6H_apu5Vw';
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/light-v9',
                center: [-97.4954506496801, 39.248342470676164],
                zoom: 3.5,
                zoomControl: false,
                interactive: false,
            });

            //map.addControl(new mapboxgl.NavigationControl());

            var framesPerSecond = 600;
            var initialOpacity = 1
            var opacity = initialOpacity;
            var initialRadius = 8;
            var radius = initialRadius;
            var maxRadius = 18;

            map.on('load', function() {


                // Add a geojson point source.
                // Heatmap layers also work with a vector tile source.
                map.addSource('earthquakes', {
                    "type": "geojson",
                    "data": "earthquakes.geojson"
                });

                map.addLayer({
                    "id": "earthquakes-heat",
                    "type": "heatmap",
                    "source": "earthquakes",
                    "maxzoom": 9,
                    "paint": {
                        // Increase the heatmap weight based on frequency and property magnitude
                        "heatmap-weight": [
                            "interpolate", ["linear"],
                            ["get", "mag"],
                            0, 0,
                            6, 1
                        ],
                        // Increase the heatmap color weight weight by zoom level
                        // heatmap-intensity is a multiplier on top of heatmap-weight
                        "heatmap-intensity": [
                            "interpolate", ["linear"],
                            ["zoom"],
                            0, 1,
                            9, 3
                        ],
                        // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).
                        // Begin color ramp at 0-stop with a 0-transparancy color
                        // to create a blur-like effect.
                        "heatmap-color": [
                            "interpolate", ["linear"],
                            ["heatmap-density"],
                            0, "rgba(248, 218, 125, .2)",
                            0.2, "rgba(248, 204, 125, .5)",
                            0.4, "rgba(255, 168, 95, 1)",
                            0.6, "rgb(253,219,199)",
                            0.8, "rgba(242, 146, 69, 1)",
                            1, "rgba(253, 127, 22, 1)"
                        ],
                        // Adjust the heatmap radius by zoom level
                        "heatmap-radius": [
                            "interpolate", ["linear"],
                            ["zoom"],
                            0, 2,
                            9, 20
                        ],
                        // Transition from heatmap to circle layer by zoom level
                        "heatmap-opacity": [
                            "interpolate", ["linear"],
                            ["zoom"],
                            7, 1,
                            9, 0
                        ],
                    }
                }, 'waterway-label');

                map.addLayer({
                    "id": "earthquakes-point",
                    "type": "circle",
                    "source": "earthquakes",
                    "minzoom": 7,
                    "paint": {
                        // Size circle radius by earthquake magnitude and zoom level
                        "circle-radius": [
                            "interpolate", ["linear"],
                            ["zoom"],
                            7, [
                                "interpolate", ["linear"],
                                ["get", "mag"],
                                1, 1,
                                6, 4
                            ],
                            16, [
                                "interpolate", ["linear"],
                                ["get", "mag"],
                                1, 5,
                                6, 50
                            ]
                        ],
                        // Color circle by earthquake magnitude
                        "circle-color": [
                            "interpolate", ["linear"],
                            ["get", "mag"],
                            1, "rgba(33,102,172,0)",
                            2, "rgba(248, 204, 125, .5)",
                            3, "rgba(255, 168, 95, 1)",
                            4, "rgb(253,219,199)",
                            5, "rgb(239,138,98)",
                            6, "rgb(178,24,43)"
                        ],
                        "circle-stroke-color": "white",
                        "circle-stroke-width": 1,
                        // Transition from heatmap to circle layer by zoom level
                        "circle-opacity": [
                            "interpolate", ["linear"],
                            ["zoom"],
                            7, 0,
                            8, 1
                        ]
                    }
                }, 'waterway-label');
                map.on('moveend', function() {
                    if ((map.getBounds().getNorthEast().lat < 34.997486284120924) && (map.getBounds().getNorthEast().lng < -115.53929752120165) && (map.getBounds().getSouthWest().lat > 32.57484297563741) && (map.getBounds().getSouthWest().lng > -121.09230695800564)) {
                        document.getElementById("reload").style.opacity = "1";
                    }

                });


                function animateMarker(timestamp) {
                    setTimeout(function() {
                        requestAnimationFrame(animateMarker);

                        radius += (maxRadius - radius) / framesPerSecond;
                        opacity -= (.9 / framesPerSecond);

                        map.setPaintProperty('earthquakes-heat', 'heatmap-radius', radius);
                        //map.setPaintProperty('earthquakes-heat', 'heatmap-opacity', opacity);
                        map.setPaintProperty('earthquakes-point', 'circle-radius', radius);
                        map.setPaintProperty('earthquakes-point', 'circle-opacity', opacity);

                        if (radius >= 10) {
                            radius = initialRadius;
                            opacity = initialOpacity;
                        }

                    }, 1000 / framesPerSecond);

                }

                // Start the animation.
                animateMarker(0);
            });
            //Chains Before
            var chB = document.getElementById("profiles").getContext('2d');
            var chBef = new Chart(chB, {
                type: 'horizontalBar',
                data: {
                    labels: [
                        'Family Travelers', 'In-Market Auto Intenders - Eco-Friendly Cars (Green Cars)', 'New Home Owners', 'NFL Enthusiasts (Pro Football Fan)', 'In-Market Auto Intenders - SUVs and Crossovers', 'Gym and Fitness Lifestyle', 'Live Sports Fans', 'Luxury Goods Shoppers (Affluent Consumer)', 'Leisure Travelers', 'Outdoor Enthusiasts', 'Pet Owners and Pet Store Shoppers', 'Luxury Fashion Shoppers', 'Moviegoers', 'Business Travelers', 'Car Commuters (Daily Commuter)'
                    ],
                    datasets: [{
                        label: 'Peet\'s',
                        data: [2.089392976, 2.032894737, 2.029050892, 2.009264933, 1.815709076, 1.791863363, 1.776594644, 1.776479262, 1.668290539, 1.648115698, 1.521200212, 1.519995477, 1.517536559, 1.404094871, 1.385927041],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true,
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Over/under index',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                callback: function(value) {
                                    return (value.substr(0, 35) + '..'); //truncate
                                },
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });
            document.getElementById("profiles").onclick = function(evt) {
                var activePoints = chBef.getElementsAtEvent(evt);
                var firstPoint = activePoints[0];
                var label = chBef.data.labels[firstPoint._index];
                var value = chBef.data.datasets[firstPoint._datasetIndex].data[firstPoint._index];
                if (firstPoint !== undefined)
                    window.location = "behavior-3.html";
            };

            //Chains Before
            var ch = document.getElementById("ch").getContext('2d');
            var cha = new Chart(ch, {
                type: 'horizontalBar',
                data: {
                    labels: [
                        'Olive Garden', 'Sherwin-Williams', 'Domino\'s Pizza', 'H&R Block', 'Burger King', 'Wendy\'s', 'Jiffy Lube', 'Wells Fargo Bank', 'Home Services at The Home Depot', 'Staples', 'Advance Auto Parts', 'Dairy Queen', 'T.J.Maxx', 'Applebee\'s', 'Sprint'
                    ],
                    datasets: [{
                        label: 'Arby\'s',
                        data: [1.761432049, 1.695184731, 1.68754159, 1.617059341, 1.524837314, 1.517095636, 1.500406119, 1.489844062, 1.42771944, 1.422651314, 1.420758609, 1.410704757, 1.400453289, 1.387293087, 1.381441939],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Over/under index',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                //callback: function(value) {
                                //  return (value.substr(0, 16) + '..'); //truncate
                                //},
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });

            //Chains After
            var ca = document.getElementById("cat").getContext('2d');
            var cat = new Chart(ca, {
                type: 'horizontalBar',
                data: {
                    labels: [
                        'Personal Care', 'ATMs', 'Tattooing', 'Financial Planning and Investments', 'Oil and Lube', 'Insurance', 'Health and Diet Food', 'Warehouses and Wholesale Stores', 'Real Estate Agents', 'Optometrist', 'Middle Eastern', 'Office Supplies', 'Massage Clinics and Therapists', 'Printing, Copying and Signage', 'Sporting Goods'
                    ],
                    datasets: [{
                        label: 'Arby\'s',
                        data: [2.07004833, 1.820469928, 1.818669379, 1.817228164, 1.815382034, 1.800842603, 1.792866954, 1.789415734, 1.769851225, 1.739533619, 1.715657126, 1.703427729, 1.683115552, 1.68227531, 1.624159422],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Over/under index',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                //callback: function(value) {
                                //  return (value.substr(0, 16) + '..'); //truncate
                                //},
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });


            //Top Chains
            var ch = document.getElementById("topCh").getContext('2d');
            var cha = new Chart(ch, {
                type: 'horizontalBar',
                data: {
                    labels: ["Walmart", "Arby\'s", "Shell", "Burger King", "Wendy\'s", "Lowe\'s", "Starbucks", "Dollar General", "Target", "Wells Fargo Bank", "Redbox", "McDonald\'s", "Dollar Tree", "Staples", "Walgreens"],
                    datasets: [{
                        label: 'Arby\'s',
                        data: [1.003790203, 1, 0.7303535114, 0.7152345978, 0.7149989914, 0.6335950527, 0.6122414942, 0.5808868348, 0.5383348834, 0.5133222979, 0.4984968786, 0.4824088748, 0.4513816989, 0.3960708193, 0.3924633252],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Over/under index',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                //callback: function(value) {
                                //  return (value.substr(0, 16) + '..'); //truncate
                                //},
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });

            // Top Categories
            var ca = document.getElementById("topCat").getContext('2d');
            var cat = new Chart(ca, {
                type: 'horizontalBar',
                data: {
                    labels: [
                        "Burgers", "Gas Stations", "Pharmacies", "Restaurants", "Discount Stores", "Banks and Credit Unions", "Hotels and Motels", "Bars", "Mexican", "Department Stores", "Beauty Salons and Barbers", "Gyms and Fitness Centers", "Cafes, Coffee and Tea Houses", "Sporting Goods", "Oil and Lube"
                    ],
                    datasets: [{
                        label: 'Arby\'s',
                        data: [1.393314472, 1.377096535, 1.368412554, 1.135946572, 1.081405722, 1.07801472, 1.052164247, 1.044574894, 1.005389193, 0.9262274923, 0.9079820279, 0.8587126354, 0.8186197112, 0.8140035687, 0.7988872765],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Over/under index',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                //callback: function(value) {
                                //  return (value.substr(0, 16) + '..'); //truncate
                                //},
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });

            //Profiles
            var chB = document.getElementById("topProfiles").getContext('2d');
            var chBef = new Chart(chB, {
                type: 'horizontalBar',
                data: {
                    labels: [
                        "Fast Food and QSR Diners (Quick Serve Restaurant Diner)", "Pet Owners and Pet Store Shoppers", "Moviegoers", "Recent Auto Repair Customers", "Financial Services Customers", "Gym and Fitness Lifestyle", "Fast Casual Diners", "Home Improvement Shoppers", "Luxury Goods Shoppers (Affluent Consumer)", "Family Fun Lifestyle (Family Fun Activities)", "Nightlife and Entertainment Enthusiasts", "Pharmacy Shoppers", "Big Box Shoppers", "Eco-Friendly Shoppers (Green Shopper)", "Family Travelers"
                    ],
                    datasets: [{
                        label: 'Arby\'s',
                        data: [1.137872272, 1.050354422, 0.9011856339, 0.9011087522, 0.8787410699, 0.8259920153, 0.8174860052, 0.8125281282, 0.7798968331, 0.771787479, 0.7546730562, 0.7541548133, 0.7512033181, 0.750404753, 0.6642869619],
                        backgroundColor: 'rgba(255, 170, 34, 0.6)',
                        borderColor: 'rgb(255, 170, 34)',
                        borderWidth: 1
                    }, ]
                },
                options: {
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true,
                            },
                            scaleLabel: {
                                display: true,
                                labelString: '% of total visitors',
                            }
                        }],
                        yAxes: [{
                            gridLines: {
                                offsetGridLines: false
                            },
                            ticks: {
                                maxRotation: 0,
                                autoSkip: false,
                                callback: function(value) {
                                    return (value.substr(0, 35) + '..'); //truncate
                                },
                            }
                        }]
                    },
                    tooltips: {
                        enabled: true,
                        mode: 'label',
                        callbacks: {
                            title: function(tooltipItems, data) {
                                var idx = tooltipItems[0].index;
                                return data.labels[idx]; //do something with title
                            },
                        }
                    },
                    legend: {
                        display: false
                    },
                }
            });

        </script>
</body>
