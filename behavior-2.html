<! DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
    <link href="style.css" rel="stylesheet" />
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
    <script src="Highmaps-6/code/highcharts.js"></script>
    <script src='Highmaps-6/code/js/modules/map.js'></script>
    <script src="Highmaps-6/code/modules/data.js"></script>
    <script src="https://code.highcharts.com/mapdata/countries/us/us-all.js"></script>
    <script src='jquery-3.3.1.js'></script>
</head>

<body style="background-color: #f6f6f6;">

    <div id="logoDiv" class="fixed">
        <img id="logo" src="arbys.png">
        <h1>Arby's</h1>
        <h3>Past week</h3>
        <p>Locality: Los Angeles</p>
    </div>
    <!--
    <div id="searchBar" class="fixed">
        <p style="padding-left: 15px; margin-top: 13px;">Arby's</p>
    </div>
    <div id="dateBar" class="fixed">
        <p style="padding-left: 15px; margin-top: 13px;">past week</p>
    </div>

-->
    <div id="container" class="fixed">
        <div id="tabs" class="fixed">
            <a href="footfall-2.html"><h3 style="margin-right: 10px;" class="inline">Footfall</h3></a>
            <a href="behavior-2.html" class="active"><h3 style="margin-right: 10px;"  class="inline">Behavior</h3></a>
            <a href="demo-2.html"><h3 style="margin-right: 10px;"  class="inline">Demographics</h3></a>
            <a href="user-2.html"><h3 style="margin-right: 10px;"  class="inline">User Journey</h3></a>
        </div>

        <div class="fixed" id="container" style="top: 50px; height: 100px;">
            <table>
                <tr>
                    <td class="td1">Top Behavior Affinity</td>
                    <td class="td1">Top Chain Affinity</td>
                    <td class="td1">Top Category Affinity</td>
                </tr>
                <tr>
                    <td class="td2">Family Travelers</td>
                    <td class="td2">Olive Garden</td>
                    <td class="td2">Personal Care</td>
                </tr>
                <tr>
                    <td class="td3">26,103 visitors</td>
                    <td class="td3">14,085 visitors</td>
                    <td class="td3">12,032 visitors</td>
                </tr>
            </table>

        </div>


        <div id='behavior' class="fixed">
            <h3>Behavioral Segments More Likely to Visit</h3>
            <canvas id="profiles" width="580" height="600"></canvas>
        </div>

        <div class="fixed" style="left: 860px; top: 200px;">
            <h3>Most likely to visit if has been to...</h3>
        </div>

        <div id='chDiv' class="fixed" style="width: 560px; height: 280px;">

            <h3>Chains</h3>
            <canvas id="ch" width="560" height="260"></canvas>
        </div>

        <div id='catDiv' class="fixed" style="width: 560px; height: 280px;">
            <h3>Categories</h3>
            <canvas id="cat" width="560" height="260"></canvas>
        </div>

    </div>


    <script>
        //Chains Before
        var chB = document.getElementById("profiles").getContext('2d');
        var chBef = new Chart(chB, {
            type: 'horizontalBar',
            data: {
                labels: [
                    'Family Travelers', 'In-Market Auto Intenders - Eco-Friendly Cars (Green Cars)', 'New Home Owners', 'NFL Enthusiasts (Pro Football Fan)', 'In-Market Auto Intenders - SUVs and Crossovers', 'Gym and Fitness Lifestyle', 'Live Sports Fans', 'Luxury Goods Shoppers (Affluent Consumer)', 'Leisure Travelers', 'Outdoor Enthusiasts', 'Pet Owners and Pet Store Shoppers', 'Luxury Fashion Shoppers', 'Moviegoers', 'Business Travelers', 'Car Commuters (Daily Commuter)'
                ],
                datasets: [{
                    label: 'Peet\'s',
                    data: [2.089392976, 2.032894737, 2.029050892, 2.009264933, 1.815709076, 1.791863363, 1.776594644, 1.776479262, 1.668290539, 1.648115698, 1.521200212, 1.519995477, 1.517536559, 1.404094871, 1.385927041],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, ]
            },
            options: {
                scales: {
                    xAxes: [{
                        ticks: {
                            beginAtZero: true,
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Over/under index',
                        }
                    }],
                    yAxes: [{
                        gridLines: {
                            offsetGridLines: false
                        },
                        ticks: {
                            maxRotation: 0,
                            autoSkip: false,
                            callback: function(value) {
                                return (value.substr(0, 35) + '..'); //truncate
                            },
                        }
                    }]
                },
                tooltips: {
                    enabled: true,
                    mode: 'label',
                    callbacks: {
                        title: function(tooltipItems, data) {
                            var idx = tooltipItems[0].index;
                            return data.labels[idx]; //do something with title
                        },
                    }
                },
                legend: {
                    display: false
                },
            }
        });
        document.getElementById("profiles").onclick = function(evt) {
            var activePoints = chBef.getElementsAtEvent(evt);
            var firstPoint = activePoints[0];
            var label = chBef.data.labels[firstPoint._index];
            var value = chBef.data.datasets[firstPoint._datasetIndex].data[firstPoint._index];
            if (firstPoint !== undefined)
                window.location = "behavior-3.html";
        };

        //Chains Before
        var ch = document.getElementById("ch").getContext('2d');
        var cha = new Chart(ch, {
            type: 'horizontalBar',
            data: {
                labels: [
                    'Olive Garden', 'Sherwin-Williams', 'Domino\'s Pizza', 'H&R Block', 'Burger King', 'Wendy\'s', 'Jiffy Lube', 'Wells Fargo Bank', 'Home Services at The Home Depot', 'Staples', 'Advance Auto Parts', 'Dairy Queen', 'T.J.Maxx', 'Applebee\'s', 'Sprint'
                ],
                datasets: [{
                    label: 'Arby\'s',
                    data: [1.761432049, 1.695184731, 1.68754159, 1.617059341, 1.524837314, 1.517095636, 1.500406119, 1.489844062, 1.42771944, 1.422651314, 1.420758609, 1.410704757, 1.400453289, 1.387293087, 1.381441939],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, ]
            },
            options: {
                scales: {
                    xAxes: [{
                        ticks: {
                            beginAtZero: true
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Over/under index',
                        }
                    }],
                    yAxes: [{
                        gridLines: {
                            offsetGridLines: false
                        },
                        ticks: {
                            maxRotation: 0,
                            autoSkip: false,
                            //callback: function(value) {
                            //  return (value.substr(0, 16) + '..'); //truncate
                            //},
                        }
                    }]
                },
                tooltips: {
                    enabled: true,
                    mode: 'label',
                    callbacks: {
                        title: function(tooltipItems, data) {
                            var idx = tooltipItems[0].index;
                            return data.labels[idx]; //do something with title
                        },
                    }
                },
                legend: {
                    display: false
                },
            }
        });

        //Chains After
        var ca = document.getElementById("cat").getContext('2d');
        var cat = new Chart(ca, {
            type: 'horizontalBar',
            data: {
                labels: [
                    'Personal Care', 'ATMs', 'Tattooing', 'Financial Planning and Investments', 'Oil and Lube', 'Insurance', 'Health and Diet Food', 'Warehouses and Wholesale Stores', 'Real Estate Agents', 'Optometrist', 'Middle Eastern', 'Office Supplies', 'Massage Clinics and Therapists', 'Printing, Copying and Signage', 'Sporting Goods'
                ],
                datasets: [{
                    label: 'Arby\'s',
                    data: [2.07004833, 1.820469928, 1.818669379, 1.817228164, 1.815382034, 1.800842603, 1.792866954, 1.789415734, 1.769851225, 1.739533619, 1.715657126, 1.703427729, 1.683115552, 1.68227531, 1.624159422],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, ]
            },
            options: {
                scales: {
                    xAxes: [{
                        ticks: {
                            beginAtZero: true
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Over/under index',
                        }
                    }],
                    yAxes: [{
                        gridLines: {
                            offsetGridLines: false
                        },
                        ticks: {
                            maxRotation: 0,
                            autoSkip: false,
                            //callback: function(value) {
                            //  return (value.substr(0, 16) + '..'); //truncate
                            //},
                        }
                    }]
                },
                tooltips: {
                    enabled: true,
                    mode: 'label',
                    callbacks: {
                        title: function(tooltipItems, data) {
                            var idx = tooltipItems[0].index;
                            return data.labels[idx]; //do something with title
                        },
                    }
                },
                legend: {
                    display: false
                },
            }
        });

    </script>
</body>
