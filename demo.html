<! DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
    <link href="style.css" rel="stylesheet" />
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
    <script src="Highmaps-6/code/highcharts.js"></script>
    <script src='Highmaps-6/code/js/modules/map.js'></script>
    <script src="Highmaps-6/code/modules/data.js"></script>
    <script src="https://code.highcharts.com/mapdata/countries/us/us-all.js"></script>
    <script src='jquery-3.3.1.js'></script>
</head>

<body style="background-color: #f6f6f6;">

    <div id="searchBar" class="fixed"></div>

    <div id="container" class="fixed">
        <div id="tabs" class="fixed">
            <a href="index.html" class="active"><h2 style="margin-right: 10px;" class="inline">Footfall</h2></a>
            <a href="behavior.html"><h2 style="margin-right: 10px;"  class="inline">Behavior</h2></a>
            <a href="demo.html"><h2 style="margin-right: 10px;"  class="inline">Demographics</h2></a>
            <a href="user.html"><h2 style="margin-right: 10px;"  class="inline">User Journey</h2></a>
        </div>

        <div id='map' class="fixed"></div>

        <div id='ageDiv' class="fixed leftChart">
            <h3>Visitor Age</h3>
            <canvas id="age" width="400" height="200"></canvas>
        </div>

        <div id='incomeDiv' class="fixed leftChart">
            <h3>Visitor Income</h3>
            <canvas id="income" width="400" height="200"></canvas>
        </div>

        <div id='homeRegionDiv' class="fixed" style="width: 800px; height: 280px;">
            <h3>Home Regions More Likely to Visit</h3>
            <canvas id="homeRegion" width="800" height="260"></canvas>
        </div>

    </div>


    <script>
        //Highmap
        $.getJSON('https://cdn.rawgit.com/highcharts/highcharts/v6.0.4/samples/data/us-population-density.json', function(data) {

            // Make codes uppercase to match the map data
            $.each(data, function() {
                this.code = this.code.toUpperCase();
            });

            // Instantiate the map
            Highcharts.mapChart('map', {

                chart: {
                    map: 'countries/us/us-all',
                    borderWidth: 1
                },

                title: {
                    text: 'Top Home Regions'
                },

                exporting: {
                    sourceWidth: 600,
                    sourceHeight: 500
                },


                mapNavigation: {
                    enabled: true
                },

                colorAxis: {
                    min: 1,
                    type: 'logarithmic',
                    minColor: '#FFF0E0',
                    maxColor: '#FB8D2B',
                    stops: [
                        [0, '#FFF0E0'],
                        [0.67, '#FFB361'],
                        [1, '#FB8D2B']
                    ]
                },

                series: [{
                    animation: {
                        duration: 1000
                    },
                    data: data,
                    joinBy: ['postal-code', 'code'],
                    dataLabels: {
                        enabled: true,
                        color: '#333',
                        format: '{point.code}'
                    },
                    name: 'Visitors from this region',
                    tooltip: {
                        pointFormat: '{point.code}: {point.value}'
                    }
                }]
            });
        });
        //Visitor Age
        var a = document.getElementById("age").getContext('2d');
        var age = new Chart(a, {
            type: 'bar',
            data: {
                labels: ["18-24", "25-34", "35-44", "45-54", "55-64", "66+"],
                datasets: [{
                    label: 'Peet\'s',
                    data: [76915, 33565, 42929, 2925, 12349, 1018],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, {
                    label: 'Average',
                    data: [83915, 42565, 21929, 4025, 11349, 918],
                    backgroundColor: 'rgba(187, 187, 187, 0.6)',
                    borderColor: 'rgb(153, 153, 153)',
                    borderWidth: 1
                }, ]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },
                legend: {
                    display: false
                },
            }
        });


        //Visitor Income
        var inc = document.getElementById("income").getContext('2d');
        var income = new Chart(inc, {
            type: 'bar',
            data: {
                labels: ["$0-25k", "$25-50k", "$50-75k", "$75-100k", "$100-125k", "$125-150k", "$150-175k", "$175-200k", "$200-225k"],
                datasets: [{
                    label: 'Peet\'s',
                    data: [1960, 5381, 2115, 12186, 25339, 36412, 43505, 4706, 27507],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, {
                    label: 'Average',
                    data: [1800, 5281, 1215, 11386, 26339, 32412, 32505, 2306, 12507],
                    backgroundColor: 'rgba(187, 187, 187, 0.6)',
                    borderColor: 'rgb(153, 153, 153)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }],
                    xAxes: [{
                        gridLines: {
                            offsetGridLines: false
                        }
                    }]
                },
                legend: {
                    display: false
                },
            }
        });

        //Footfall
        var ffBH = document.getElementById("homeRegion").getContext('2d');
        var ffByHr = new Chart(ffBH, {
            type: 'bar',
            data: {
                labels: [
                    'Virginia, US', 'Illinois, US', 'Washington, US', 'Massachusetts, US', 'Tennessee, US', 'Michigan, US', 'New York, US', 'Pennsylvania, US', 'Minnesota, US', 'Utah, US', 'Colorado, US', 'Florida, US', 'Texas, US', 'Ohio, US', 'California, US', 'Arizona, US', 'North Carolina, US', 'Georgia, US'
                ],
                datasets: [{
                    label: 'Peet\'s',
                    data: [1.157159425, 1.123964543, 1.112147701, 1.079088305, 1.071666307, 1.068897666, 1.063356444, 1.053247826, 1.030666912, 1.02734554, 1.025694389, 1.003181631, 1.002958137, 1.002199274, 1.000495434, 0.9960720459, 0.985471638, 0.9721707637, 0.9201556068, 0.8709896028, 0.8421482932, 0.756394457, 0.7489278743, 0.564763018],
                    backgroundColor: 'rgba(255, 170, 34, 0.6)',
                    borderColor: 'rgb(255, 170, 34)',
                    borderWidth: 1
                }, {
                    label: 'Average',
                    data: [1.127159425, 1.103964543, 1.032147701, 1.019088305, 1.041666307, 1.038897666, 1.013356444, 1.023247826, 1.010666912, 1.00734554, 1.005694389, 1.001181631, 0.902958137, 0.702199274, 0.800495434, 0.9660720459, 0.935471638, 0.9121707637, 0.9001556068, 0.8309896028, 0.8121482932, 0.726394457, 0.7089278743, 0.504763018],
                    backgroundColor: 'rgba(187, 187, 187, 0.6)',
                    borderColor: 'rgb(153, 153, 153)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }],
                    xAxes: [{
                        gridLines: {
                            offsetGridLines: false
                        }
                    }]
                },
                legend: {
                    display: false
                },
            }
        });

    </script>
</body>
